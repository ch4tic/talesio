---
import Layout from '~/layouts/PageLayout.astro';
import Hero from '~/components/widgets/Hero.astro';
import Stats from '~/components/widgets/Stats.astro';
import Headline from '~/components/ui/Headline.astro';

const metadata = {
  title: 'Worldwide Banned Books | Talesio',
  ignoreTitleTemplate: true,
};

const callToAction = {
  href: '#books-container',
  target: '_self', 
  text: 'Take Action Now', 
};

// Halloween Bundle Listing
const halloweenBundle = {
  title: 'ðŸŽƒ The Halloween Bundle ðŸŽƒ',
  page_url: 'https://shop.beacons.ai/talesio/f5761459-c9cd-4f1b-94d7-1af5e32521c5',
  img_url: '/HalloweenBundle.png',
  description: 'Get two books for the price of one! This Halloween, dive into our most selling books The Suppressed Education and Arcane Stance.',
};

const books = [
  { title: 'Magnetic Aura', page_url2:'/library/magnetic-aura', page_url: 'https://shop.beacons.ai/talesio/0a5c8e68-10b9-44c0-83ec-3fef02f55e54', img_url: '/MagneticAura.png', description: 'A practical guide filled with steps to boost confidence, charisma and attraction.' },
  { title: 'Arcane Stance', page_url2:'/library/arcane-stance', page_url: 'https://shop.beacons.ai/talesio/f8c213cc-2cb3-4517-86c1-d33797e95e7c', img_url: '/ArcaneStance.png', description: 'Book that reveals body language secrets to enhance authority and social dominance.' },
  { title: 'Suppressed Education', page_url2:'/library/the-suppressed-education', page_url: 'https://shop.beacons.ai/talesio/bffb7d4c-fb49-457f-a306-c3d7e0a9f37f', img_url: '/TheSuppressedEducation.png', description: 'Detailed book full of essential knowledge overlooked by traditional education systems.' },
  { title: 'Energy Codes', page_url2:'/library/energy-codes', page_url: 'https://revivalofwisdom.com/products/vibrational-energy-codes-pdf?sca_ref=7186286.vYxyAp6dwA', img_url: '/VibrationalEnergyCodes.png', description: 'Guide to manifesting abundance and positivity and unique ways of raising vibrational frequency.' },
  { title: 'Human Health Guide', page_url2:'/library/human-health-guide', page_url: 'https://revivalofwisdom.com/products/human-health-guide-pdf?sca_ref=7186286.vYxyAp6dwA', img_url: '/HumanHealthGuide.png', description: 'Book teaching essential foods, oils, and practices for enhancing vitality and overall well-being.' },
  { title: 'Book of Wisdom', page_url2:'/library/book-of-wisdom', page_url: 'https://revivalofwisdom.com/products/book-of-wisdom-pdf-english?sca_ref=7186286.vYxyAp6dwA', img_url: '/BookOfWisdom.png', description: 'Insights and esoteric knowledge to awaken your wisdom and connect with the universe.' },
  { title: 'Alkaline Awakening', page_url2:'/library/alkaline-awakening', page_url: 'https://revivalofwisdom.com/products/alkaline-awakening-book?sca_ref=7186286.vYxyAp6dwA', img_url: '/Alkaline.png', description: 'Guide with over 126 recipes, in-depth knowledge on alkalinity, fasting, and detoxification.' },
  { title: 'The Wisdom Bundle', page_url2:'/library/the-wisdom-bundle', page_url: 'https://revivalofwisdom.com/products/the-wisdom-bundle?sca_ref=7186286.vYxyAp6dwA', img_url: '/TheWisdomBundle.png', description: 'Bundle with the Book of Wisdom, Human Health Guide and Manifestation Mastery.' },
];

const subliminals = [
  { title: 'Lucky Girl Syndrome', page_url2:'/library/lucky-girl-syndrome', page_url: 'https://shop.beacons.ai/talesio/8c7b3857-1c69-4935-8a71-a9f484b1f23c', img_url: '/Lucky.png', description: 'This audio helps reprogram your mindset, attracting positivity, success, and abundance effortlessly into your life.' },
  { title: 'Remove Social Anxiety', page_url2:'/library/remove-social-anxiety', page_url: 'https://shop.beacons.ai/talesio/40e84676-961f-45f4-a0de-1e528988c984', img_url: '/Anxiety.png', description: 'This audio helps empower you to overcome social anxiety and build confidence effortlessly in any situation.' },
  { title: 'Get Toned Abs', page_url2:'/library/get-toned-abs', page_url: 'https://shop.beacons.ai/talesio/4889b203-3929-4702-910a-0ef5e8134c97', img_url: '/Abs.png', description: 'This audio helps to build and motivate your body to achieve toned abs and a stronger core effortlessly.' },
  { title: 'Subliminals Bundle', page_url2:'/library/subliminals-bundle', page_url: 'https://shop.beacons.ai/talesio/343699d1-2c2a-4415-ab5f-38eb4c998fd0', img_url: '/Bundle.png', description: 'This is a collection that combines all three subliminals into one product that will help you achieve your goals.' }
];
---

<Layout metadata={metadata}>
  <Hero
    actions={[
      {
        variant: 'primary',
        text: 'View Our Library',
        target: '_blank',
        icon: 'tabler:arrow-down',
        id: 'scroll-button',
      },
    ]}
  >
    <Fragment slot="title">
      <span class="text-accent dark:text-white highlight">Explore </span>
      <span class="text-book-theme"> Banned</span> E-Books
    </Fragment>
    <Fragment slot="subtitle">
      <span class="hidden sm:inline">
        <span class="font-semibold">Talesio</span><span> hosts a wide collection of banned books from around the world. <br>The site could be taken down any moment, hurry.</span>
      </span>
    </Fragment>
  </Hero>

  <div id="countdown" class="text-center py-8 text-white bg-red-600">
    <h2 class="text-3xl font-bold">DISCOUNT: 'TALESIO20'</h2> 
    <p class="text-xl">Code expires in:</p>
    <div id="timer" class="text-4xl font-bold mt-4"></div>
  </div>

  <Stats
    stats={[
      { title: 'Banned Books', amount: '8' },
      { title: 'Total Downloads', amount: '23.8K' },
      { title: 'Subliminals', amount: '3' },
    ]}
  />

  <!-- Halloween Bundle Section -->
  <div class="text-center py-12 bg-black text-white rounded-lg my-10 mx-auto max-w-2xl">
    <h2 class="text-4xl font-bold mb-4">{halloweenBundle.title}</h2>
    <img src={halloweenBundle.img_url} alt={halloweenBundle.title} class="mx-auto w-full max-w-[500px] rounded-lg" />
    <p class="text-lg mt-4">{halloweenBundle.description}</p>
    <a
      href={halloweenBundle.page_url}
      class="inline-block mt-6 px-6 py-3 bg-orange-500 hover:bg-orange-700 text-white font-bold text-lg rounded-lg transition duration-300"
    >
      Get the Halloween Bundle
    </a>
  </div>

  <div class="md:mx-auto w-full max-w-7xl py-12 md:py-20">
    <Headline title={'Banned E-Books Library'} />

    <div id="books-container" class="gap-8 w-full grid grid-cols-1 md:grid-cols-4 mb-5">
      {books.map((item) => (
        <div class="mx-auto md:mx-0 w-2/3 md:w-64 flex flex-col rounded-lg shadow-[0_4px_30px_rgba(0,0,0,0.1)] dark:shadow-[0_4px_30px_rgba(0,0,0,0.1)] backdrop-blur border border-[#ffffff29] bg-white dark:bg-slate-900 p-6 ">
          <a href={item.page_url}>
            <div>
              <img
                class="mx-auto w-60 rounded-md"
                style="aspect-ratio: 4 / 6;"
                src={item.img_url}
                alt={item.title}
                sizes="(max-width: 600px) 100vw, (max-width: 900px) 50vw, 432px"
                loading="lazy"
              />
            </div>
            <div class="text-center mt-4">
              <h3 class="text-lg font-semibold text-black dark:text-white">{item.title}</h3>
              <p class="text-sm text-gray-600 dark:text-gray-400 mb-3 mt-2">{item.description}</p>
            </div>
          </a>
          <a href={item.page_url2} target="_blank" class="mt-auto inline-block text-center w-full px-4 py-2 bg-orange-500 text-white font-bold rounded-lg">View in Library</a>
        </div>
      ))}
    </div>
  </div>

  <div class="w-full max-w-7xl mx-auto py-12 md:py-20">
    <div class="text-center p-6 border border-gray-300 rounded-lg backdrop-blur-sm bg-transparent shadow-md">
      <h2 class="text-3xl font-bold text-black dark:text-white mb-2">Go Deeper Down The Rabbit Hole...</h2>
      <p class="text-lg text-gray-700 dark:text-gray-300 mb-4">Click at your own risk. This is for advanced individuals only.</p>
      <a href="https://revivalofwisdom.com/?sca_ref=7186286.vYxyAp6dwA" target="_blank" class="inline-block mt-4 px-6 py-3 bg-orange-500 hover:bg-orange-700 text-white font-bold text-lg rounded-lg transition duration-300">
        Take the Leap
      </a>
    </div>
  </div>
  
  <div class="md:mx-auto w-full max-w-7xl py-12 md:py-20">
    <Headline title={'Subliminal Audios'} />
    <div class="gap-8 w-full grid grid-cols-1 md:grid-cols-4">
      {subliminals.map((item) => (
        <div class="mx-auto md:mx-0 w-2/3 md:w-64 flex flex-col rounded-lg shadow-[0_4px_30px_rgba(0,0,0,0.1)] dark:shadow-[0_4px_30px_rgba(0,0,0,0.1)] backdrop-blur border border-[#ffffff29] bg-white dark:bg-slate-900 p-6">
          <a href={item.page_url}>
            <div>
              <img
                class="mx-auto w-60 rounded-md"
                style="aspect-ratio: 4 / 6;"
                src={item.img_url}
                alt={item.title}
                sizes="(max-width: 600px) 100vw, (max-width: 900px) 50vw, 432px"
                loading="lazy"
              />
            </div>
            <div class="text-center mt-4">
              <h3 class="text-lg font-semibold text-black dark:text-white">{item.title}</h3>
              <p class="text-sm text-gray-600 dark:text-gray-400 mb-3 mt-2">{item.description}</p>
            </div>
          </a>
          <a href={item.page_url2} target="_blank" class="mt-auto inline-block text-center w-full px-4 py-2 bg-orange-500 text-white font-bold rounded-lg">View in Library</a>
        </div>
      ))}
    </div>
  </div>

  <div class="w-full max-w-7xl mx-auto py-12 md:py-20">
    <div class="text-center p-6 border border-gray-300 rounded-lg backdrop-blur-sm bg-transparent shadow-md">
      <h2 class="text-3xl font-bold text-black dark:text-white mb-2">Go Deeper Down The Rabbit Hole...</h2>
      <p class="text-lg text-gray-700 dark:text-gray-300 mb-4">Click at your own risk. This is for advanced individuals only.</p>
      <a href="https://revivalofwisdom.com/?sca_ref=7186286.vYxyAp6dwA" target="_blank" class="inline-block mt-4 px-6 py-3 bg-orange-500 hover:bg-orange-700 text-white font-bold text-lg rounded-lg transition duration-300">
        Take the Leap
      </a>
    </div>
  </div>
</Layout>

<script>
  document.getElementById('scroll-button').addEventListener('click', function () {
    document.getElementById('books-container').scrollIntoView({ behavior: 'smooth' });
  });
</script>

<script>
  function countdown() {
    const timerDisplay = document.getElementById('timer');

    // Get the current UTC time
    const now = new Date().getTime();
    
    // Calculate the end time (6 hours from now)
    const endTime = new Date(now + (3 * 60 * 60 * 1000)).getTime();

    // Store the end time in local storage as UTC
    localStorage.setItem('endTime', endTime);

    const interval = setInterval(() => {
      // Get the current UTC time
      const currentTime = new Date().getTime();
      
      // Retrieve the stored end time
      const storedEndTime = parseInt(localStorage.getItem('endTime'), 10);
      
      const distance = storedEndTime - currentTime;

      if (distance < 0) {
        clearInterval(interval);
        timerDisplay.innerHTML = "Time's up!";
        localStorage.removeItem('endTime'); 
        return;
      }

      const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((distance % (1000 * 60)) / 1000);

      timerDisplay.innerHTML = `${hours}h ${minutes}m ${seconds}s`;
    }, 1000);
  }

  countdown();
</script>

<script>
  function countdown() {
    const timerDisplay = document.getElementById('timer2');

    // Get the current UTC time
    const now = new Date().getTime();
    
    // Calculate the end time (6 hours from now)
    const endTime = new Date(now + (6 * 60 * 60 * 1000)).getTime();

    // Store the end time in local storage as UTC
    localStorage.setItem('endTime', endTime);

    const interval = setInterval(() => {
      // Get the current UTC time
      const currentTime = new Date().getTime();
      
      // Retrieve the stored end time
      const storedEndTime = parseInt(localStorage.getItem('endTime'), 10);
      
      const distance = storedEndTime - currentTime;

      if (distance < 0) {
        clearInterval(interval);
        timerDisplay.innerHTML = "Time's up!";
        localStorage.removeItem('endTime'); 
        return;
      }

      const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((distance % (1000 * 60)) / 1000);

      timerDisplay.innerHTML = `${hours}h ${minutes}m ${seconds}s`;
    }, 1000);
  }

  countdown();
</script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const popup = document.getElementById('halloween-popup');
    const closeButton = document.getElementById('close-popup');

    // Show the popup when the page loads
    setTimeout(() => {
      popup.classList.add('show');
    }, 1000); // Delay to give it a nice effect

    // Close the popup when clicking the X button
    closeButton.addEventListener('click', function() {
      popup.classList.remove('show');
    });
  });
</script>
